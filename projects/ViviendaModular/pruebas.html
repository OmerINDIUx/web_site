<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scroll Image Sequence</title>

    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            background-color: black;
            font-family: sans-serif;
            overflow-x: hidden;
        }

        .video-scroll-wrapper {
            position: relative;
            width: 100%;
        }

        .video-fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Canvas ocupa todo el área y tiene fondo rojo para debug */
        #image-sequence {
            display: block;
            width: 100vw;
            height: 100vh;
            background: red;
        }

        .TextLarge {
            margin-top: 120vh;
            text-align: center;
            font-size: 4rem;
            color: white;
        }


        /* Secciones */
        section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            /* z-index: 10; */
        }

        /* Card genérica */
        .card {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 2rem;
            border-radius: 1rem;
            max-width: 800px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
            z-index: 10;
        }

        .card h1,
        .card h2,
        .card h3 {
            margin: 0.5rem 0;
        }

        .card p {
            line-height: 1.5;
        }

        p {
            color: white;
        }

        .white {
            color: white;
        }

        .TextLarge {
            display: flex;
            justify-content: center;
            /* centra horizontalmente */
            align-items: center;
            /* centra verticalmente si es más corto que la pantalla */
            padding: 4rem 2rem;
            background-color: black;
            /* mantiene coherencia con el resto */
        }

        .TextLarge div {
            max-width: 900px;
            /* ancho de lectura cómodo */
            text-align: justify;
            /* texto justificado */
            color: white;
            line-height: 1.8;
        }

        .TextLarge h2 {
            text-align: center;
            /* título centrado */
            margin-bottom: 2rem;
            font-size: 2rem;
            color: white;
        }



        .video-fullscreen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: 0; /* Queda detrás */
        display: flex;
        align-items: center;
        justify-content: center;
    }

    #image-sequence {
        display: block;
        width: 100vw;
        height: 100vh;
        background: black;
    }

    section {
        position: relative;
        z-index: 10; /* Las cards estarán arriba */
    }
    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
</head>

<body>

    <div class="video-scroll-wrapper">
        <div class="video-fullscreen">
            <canvas id="image-sequence"></canvas>
        </div>
    </div>


    <!-- Cards -->
    <section>
        <div class="card">
            <h2>Nota Conceptual de Proyecto </h2>
            <h1>Vivienda Modular </h1>
            <h3>Diciembre 2024 </h3>
        </div>


    </section>

    <section>
        <div class="card">
            <p>Las viviendas prefabricadas, ampliamente utilizadas en países como Suecia y Japón, son una solución
                eficiente y sostenible para abordar crisis habitacionales. Producidas en fábricas y ensambladas en el
                sitio, optimizan recursos, reducen el impacto ambiental y se adaptan a normativas locales para contextos
                urbanos o rurales. Este método puede reducir costos en un 20% y tiempos de construcción hasta en un 50%,
                destacándose como una alternativa moderna y práctica frente a los métodos tradicionales 2.</p>
        </div>
    </section>

    <section>
        <div class="card">
            <p>Las viviendas modulares permiten construcciones rápidas y eficientes, además de integrarse con
                estrategias como la reutilización de contenedores marítimos o el Cohousing. Estas opciones, combinadas,
                conforman un ecosistema flexible de soluciones adaptables a distintos contextos urbanos y necesidades
                habitacionales</p>
        </div>
    </section>

    <section>
        <div class="card">
            <p>Esta nota conceptual expone argumentos sobre la viabilidad de las viviendas modulares como una
                alternativa capaz de transformar los desafíos actuales en oportunidades de desarrollo social y
                ambiental. Esta solución no solo cumple con las normativas vigentes, sino que también incorpora
                elementos de sostenibilidad y adaptabilidad frente a riesgos geológicos, representando una opción
                accesible y moderna para atender la creciente demanda de vivienda</p>
        </div>
    </section>


    <section>
        <div class="card">
            <p>Las viviendas modulares se pueden adaptar de distintas maneras, tal como las viviendas en contenedores
                marítimos que es una técnica que ha ganado reconocimiento por su versatilidad y sostenibilidad. Estos
                contenedores, diseñados originalmente para el transporte de mercancías, pueden ser reutilizados para
                crear espacios habitables con un impacto ambiental reducido. Más allá del uso residencial, su
                flexibilidad permite adaptarlos como oficinas, restaurantes u otros espacios funcionales.</p>
        </div>
    </section>

    <section class="TextLarge">
        <div>
            <h2 class="white">Contexto:</h2>
            <p>México tiene un déficit de vivienda, con alrededor de 8.5 millones de viviendas las que se encuentran en
                rezago habitacional. De 34.8 millones de viviendas que hay en México, aproximadamente el 26.6 % de la
                población vive en algún tipo de riesgo o hacinamiento, esto de acuerdo con datos oficiales de la
                Comisión Nacional de Vivienda en 2020</p>
            <p>Es urgente plantear la problemática de la vivienda en México desde una perspectiva integral que contemple
                la rentabilidad, la sostenibilidad y el cumplimiento de las normativas mexicanas vigentes. Ante esta
                situación, surge la oportunidad de explorar soluciones que no solo aborden el déficit habitacional, sino
                que lo hagan de manera sostenible, eficiente y adaptada a las necesidades del entorno. </p>
            <p>Ante este panorama, es necesario adoptar estrategias que desafíen el esquema tradicional de vivienda. La
                vivienda modular, la reutilización de contenedores y el Cohousing ofrecen soluciones flexibles y
                accesibles, marcando un cambio de paradigma en la construcción. </p>
        </div>
    </section>
    <section>
        <div class="card">
            <img src="images/pexels-david-olaniyi-1926688-10504890.jpg" alt="Vivienda Modular"
                style="max-width:100%; border-radius:1rem; box-shadow:0 4px 16px rgba(0,0,0,0.4); margin-bottom:1rem;">
            <p>Ejemplo de vivienda modular: diseño moderno, eficiente y adaptable a distintos entornos.</p>
        </div>
    </section>

    <section class="TextLarge">
        <div>
            <h2 class="white">Contexto:</h2>
            <p>Las viviendas prefabricadas destacan por su eficiencia y adaptabilidad, permitiendo la integración de
                módulos para atender necesidades diversas, desde familias pequeñas hasta desarrollos multifamiliares.
                Además, su diseño modular y facilidad de transporte hacen que sean ideales para comunidades con
                infraestructura limitada, ofreciendo una solución sostenible y práctica 3. </p>
            <p>Ante los desafíos actuales en la construcción de vivienda, la edificación modular es una alternativa
                viable y estratégica frente a los métodos tradicionales. Su principal ventaja radica en la reducción
                significativa de costos y tiempos de entrega, lo que permite acelerar la disponibilidad de vivienda sin
                comprometer la calidad. </p>
            <p>Este modelo de construcción se basa en la producción industrializada de módulos, lo que garantiza un
                control de calidad constante y minimiza el desperdicio de materiales, optimizando así los recursos.
                Además, su impacto ambiental es considerablemente menor en comparación con las técnicas convencionales.
                Ejemplos exitosos de su implementación pueden observarse en países como Japón, donde esta metodología ha
                permitido la rápida expansión del parque habitacional 4.</p>
        </div>
    </section>

    <script>
        gsap.registerPlugin(ScrollTrigger);

    const canvas = document.getElementById("image-sequence");
    const context = canvas.getContext("2d");

    const frameStart = 1000;
    const frameEnd = 1689;
    const frameCount = frameEnd - frameStart + 1;
    const currentFrame = index => `images/image_sequences/vivienda_${frameStart + index}.png`;

    const images = [];
    const imageSeq = { frame: 0 };

    for (let i = 0; i < frameCount; i++) {
        const img = new Image();
        img.src = currentFrame(i);
        images.push(img);
    }

    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        render();
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    function render() {
        const img = images[imageSeq.frame];
        if (img && img.complete) {
            context.clearRect(0, 0, canvas.width, canvas.height);
            context.drawImage(img, 0, 0, canvas.width, canvas.height);
        }
    }

    // Pin de la secuencia
    ScrollTrigger.create({
        trigger: ".video-scroll-wrapper",
        start: "top top",
        endTrigger: ".TextLarge",
        end: "top top",
        pin: ".video-fullscreen",
        pinSpacing: false, // evita espacio extra
        scrub: false,
        markers: true
    });

    // Animación de frames ligada al scroll
    gsap.to(imageSeq, {
        frame: frameCount - 1,
        snap: "frame",
        ease: "none",
        scrollTrigger: {
            trigger: ".video-scroll-wrapper",
            start: "top top",
            endTrigger: ".TextLarge",
            end: "top top",
            scrub: 1
        },
        onUpdate: render
    });

    // Fade out cuando llega el texto
    gsap.to(".video-fullscreen", {
        opacity: 0,
        ease: "power2.out",
        scrollTrigger: {
            trigger: ".TextLarge",
            start: "top bottom",
            end: "top center",
            scrub: true
        }
    });

    images[0].onload = render;
    </script>

</body>

</html>